{
  "basic": {
    "description": "基础功能开关",
    "type": "object",
    "items": {
      "enable_memory": {
        "description": "启用记忆功能",
        "type": "bool",
        "default": true,
        "hint": "开启后AI会自动记住重要对话内容"
      },
      "enable_inject": {
        "description": "自动注入记忆到对话",
        "type": "bool",
        "default": true,
        "hint": "对话时自动带入相关的历史记忆"
      }
    }
  },
  "logging": {
    "description": "日志配置",
    "type": "object",
    "items": {
      "log_level": {
        "description": "日志级别",
        "type": "string",
        "default": "INFO",
        "options": ["DEBUG", "INFO", "WARNING", "ERROR"],
        "hint": "DEBUG显示最详细信息，推荐使用INFO"
      }
    }
  },
  "embedding": {
    "description": "嵌入向量设置",
    "type": "object",
    "items": {
      "source": {
        "description": "嵌入源选择",
        "type": "string",
        "default": "auto",
        "options": ["auto", "astrbot", "local"],
        "hint": "auto-自动选择（推荐），astrbot-使用AstrBot提供的embedding服务，local-使用本地模型"
      },
      "astrbot_provider_id": {
        "description": "AstrBot Embedding提供者",
        "type": "string",
        "_special": "select_embedding_provider",
        "default": "",
        "hint": "留空使用第一个可用provider，可指定特定提供者"
      },
      "fallback_to_local": {
        "description": "AstrBot不可用时降级到本地模型",
        "type": "bool",
        "default": true,
        "hint": "开启后，当AstrBot embedding服务不可用时自动使用本地模型（注意维度需匹配）"
      },
      "local_model": {
        "description": "本地嵌入模型",
        "type": "string",
        "default": "BAAI/bge-small-zh-v1.5",
        "hint": "本地sentence-transformers模型名称，首次使用会自动下载"
      },
      "local_dimension": {
        "description": "本地模型嵌入维度",
        "type": "int",
        "default": 512,
        "hint": "本地模型的向量维度，留空自动检测。常见值：512（bge-small）, 768（bge-base）, 1024（bge-large/m3）"
      },
      "enable_local_provider": {
        "description": "启用本地嵌入模型",
        "type": "bool",
        "default": true,
        "hint": "启用后可在 AstrBot 无 embedding 服务时使用本地模型（首次加载约需10-30秒，不会阻塞启动）"
      }
    }
  },
  "llm_providers": {
    "description": "LLM提供者配置",
    "type": "object",
    "items": {
      "default_provider_id": {
        "description": "默认LLM提供者",
        "type": "string",
        "_special": "select_provider",
        "default": "",
        "hint": "留空使用AstrBot默认提供者，或选择其他模型用于摘要/升级等任务"
      },
      "memory_provider_id": {
        "description": "记忆功能LLM提供者",
        "type": "string",
        "_special": "select_provider",
        "default": "",
        "hint": "用于记忆摘要、升级等任务，留空使用默认提供者"
      },
      "persona_provider_id": {
        "description": "用户画像LLM提供者",
        "type": "string",
        "_special": "select_provider",
        "default": "",
        "hint": "用于用户画像提取，留空使用默认提供者"
      },
      "knowledge_graph_provider_id": {
        "description": "知识图谱LLM提供者",
        "type": "string",
        "_special": "select_provider",
        "default": "",
        "hint": "用于知识图谱三元组提取，留空使用默认提供者"
      },
      "image_analysis_provider_id": {
        "description": "图片分析LLM提供者（需要视觉模型）",
        "type": "string",
        "_special": "select_provider",
        "default": "",
        "hint": "用于图片内容分析，请选择支持Vision的模型"
      },
      "enhanced_provider_id": {
        "description": "智能增强LLM提供者",
        "type": "string",
        "_special": "select_provider",
        "default": "",
        "hint": "用于敏感度检测、触发器检测等智能增强功能，留空使用默认提供者"
      }
    }
  },
  "memory": {
    "description": "记忆核心设置",
    "type": "object",
    "items": {
      "max_context_memories": {
        "description": "注入记忆数量",
        "type": "int",
        "default": 5,
        "hint": "每次对话注入的相关记忆数量（1-10）"
      },
      "max_working_memory": {
        "description": "工作记忆数量上限",
        "type": "int",
        "default": 20,
        "hint": "会话内临时记忆数量上限，超过会触发升级"
      },
      "upgrade_mode": {
        "description": "记忆升级模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-仅规则（省token），llm-LLM判断，hybrid-混合（推荐）"
      },
      "use_llm": {
        "description": "启用LLM增强处理",
        "type": "bool",
        "default": false,
        "hint": "开启后使用LLM进行消息摘要、记忆升级等（质量更高但消耗token）"
      }
    }
  },
  "persona": {
    "description": "用户画像提取设置",
    "type": "object",
    "items": {
      "extraction_mode": {
        "description": "画像提取模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-纯规则匹配（默认），llm-LLM智能提取，hybrid-混合模式（推荐）"
      }
    }
  },
  "knowledge_graph": {
    "description": "知识图谱设置",
    "type": "object",
    "items": {
      "enabled": {
        "description": "启用知识图谱",
        "type": "bool",
        "default": true,
        "hint": "从对话中自动提取实体关系，构建知识图谱，支持多跳推理"
      },
      "extraction_mode": {
        "description": "三元组提取模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-规则匹配（默认），llm-LLM智能提取（更准确但消耗token），hybrid-混合"
      },
      "max_depth": {
        "description": "最大推理跳数",
        "type": "int",
        "default": 3,
        "hint": "多跳推理的最大深度（1-5），值越大能发现越远的关联但速度越慢"
      },
      "max_nodes_per_hop": {
        "description": "每跳最大节点数",
        "type": "int",
        "default": 10,
        "hint": "每次跳转最多探索的节点数量，控制搜索广度（5-50）"
      },
      "max_facts": {
        "description": "注入事实数量上限",
        "type": "int",
        "default": 8,
        "hint": "注入LLM上下文的知识关联事实数量上限（3-20）"
      },
      "min_confidence": {
        "description": "最小置信度",
        "type": "float",
        "default": 0.3,
        "hint": "低于此置信度的推理路径将被过滤（0.1-0.9）"
      }
    }
  },
  "llm_enhanced": {
    "description": "LLM智能增强",
    "type": "object",
    "items": {
      "sensitivity_mode": {
        "description": "敏感度检测模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-规则匹配（默认），llm-语义理解，hybrid-混合（推荐）"
      },
      "trigger_mode": {
        "description": "触发器检测模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-关键词匹配（默认），llm-意图理解，hybrid-混合（推荐）"
      },
      "emotion_mode": {
        "description": "情感分析模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-词典+规则（默认），llm-深度理解，hybrid-混合（推荐）"
      },
      "proactive_mode": {
        "description": "主动回复检测模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-规则判断（默认），llm-社交理解，hybrid-混合（推荐）"
      },
      "conflict_mode": {
        "description": "冲突解决模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-相似度判断（默认），llm-语义判断，hybrid-混合（推荐）"
      },
      "retrieval_mode": {
        "description": "检索路由模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-规则路由（默认），llm-意图理解，hybrid-混合（推荐）"
      }
    }
  },
  "image_analysis": {
    "description": "图片分析设置",
    "type": "object",
    "items": {
      "enable": {
        "description": "启用图片分析",
        "type": "bool",
        "default": true,
        "hint": "使用Vision LLM分析对话中的图片内容"
      },
      "mode": {
        "description": "分析模式",
        "type": "string",
        "default": "auto",
        "options": ["auto", "brief", "detailed", "skip"],
        "hint": "auto-智能判断（推荐）, brief-简要, detailed-详细, skip-跳过"
      },
      "daily_budget": {
        "description": "每日分析次数上限",
        "type": "int",
        "default": 100,
        "hint": "每天最多分析的图片数量，0表示无限制"
      }
    }
  },
  "proactive_reply": {
    "description": "主动回复设置",
    "type": "object",
    "items": {
      "enable": {
        "description": "启用主动回复",
        "type": "bool",
        "default": false,
        "hint": "检测到用户需要回应时主动发送消息（实验性功能）"
      },
      "group_whitelist_mode": {
        "description": "群聊白名单模式",
        "type": "bool",
        "default": false,
        "hint": "开启后仅在管理员通过指令启用的群聊中触发主动回复，使用 /proactive_reply on|off 控制"
      }
    }
  },
  "activity_adaptive": {
    "description": "场景自适应设置",
    "type": "object",
    "items": {
      "enable": {
        "description": "启用场景自适应",
        "type": "bool",
        "default": true,
        "hint": "根据群活跃度自动调整主动回复频率、批量处理参数等配置，实现温和型陪伴风格。使用 /activity_status 查看各群状态"
      }
    }
  },
  "error_friendly": {
    "description": "错误消息友好化",
    "type": "object",
    "items": {
      "enable": {
        "description": "启用错误消息友好化",
        "type": "bool",
        "default": true,
        "hint": "将框架发送的技术性错误消息替换为友好的提示语"
      }
    }
  },
  "web_ui": {
    "description": "Web管理界面设置",
    "type": "object",
    "items": {
      "enable": {
        "description": "启用Web管理界面",
        "type": "bool",
        "default": false,
        "hint": "开启后可通过独立端口访问Web管理页面，与AstrBot认证系统解耦"
      },
      "port": {
        "description": "Web服务端口",
        "type": "int",
        "default": 8089,
        "hint": "Web管理界面的监听端口（1024-65535）"
      },
      "access_key": {
        "description": "访问密钥",
        "type": "string",
        "default": "",
        "hint": "访问Web管理界面所需的密钥，留空则无需认证（不推荐）"
      },
      "host": {
        "description": "监听地址",
        "type": "string",
        "default": "127.0.0.1",
        "hint": "Web服务监听地址，默认仅本机访问。设为0.0.0.0允许外部访问（需注意安全）"
      }
    }
  }
}

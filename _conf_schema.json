{
  "basic": {
    "description": "基础功能开关",
    "type": "object",
    "items": {
      "enable_memory": {
        "description": "启用记忆功能",
        "type": "bool",
        "default": true,
        "hint": "开启后AI会自动记住重要对话内容"
      },
      "enable_inject": {
        "description": "自动注入记忆到对话",
        "type": "bool",
        "default": true,
        "hint": "对话时自动带入相关的历史记忆"
      },
      "log_level": {
        "description": "日志级别",
        "type": "string",
        "default": "INFO",
        "options": ["DEBUG", "INFO", "WARNING", "ERROR"],
        "hint": "DEBUG显示最详细信息，推荐使用INFO"
      }
    }
  },
  "memory": {
    "description": "记忆设置",
    "type": "object",
    "items": {
      "max_context_memories": {
        "description": "注入记忆数量",
        "type": "int",
        "default": 3,
        "hint": "每次对话注入的相关记忆数量（1-10）"
      },
      "max_working_memory": {
        "description": "工作记忆数量上限",
        "type": "int",
        "default": 10,
        "hint": "会话内临时记忆数量上限，超过会触发升级"
      },
      "upgrade_mode": {
        "description": "记忆升级模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-仅规则（省token），llm-LLM判断（需启用use_llm），hybrid-混合（推荐）"
      }
    }
  },
  "llm": {
    "description": "LLM设置",
    "type": "object",
    "items": {
      "use_llm": {
        "description": "使用LLM增强处理",
        "type": "bool",
        "default": false,
        "hint": "开启后使用LLM进行消息摘要、记忆升级等（质量更高但消耗token）"
      },
      "provider_id": {
        "description": "LLM处理使用的提供者",
        "type": "string",
        "_special": "select_provider",
        "default": "",
        "hint": "留空使用AstrBot默认提供者，或选择其他模型用于摘要/升级等任务"
      }
    }
  },
  "proactive_reply": {
    "description": "主动回复设置",
    "type": "object",
    "items": {
      "enable": {
        "description": "启用主动回复",
        "type": "bool",
        "default": false,
        "hint": "检测到用户需要回应时主动发送消息（实验性功能）"
      },
      "group_whitelist_mode": {
        "description": "群聊白名单模式",
        "type": "bool",
        "default": false,
        "hint": "开启后仅在管理员通过指令启用的群聊中触发主动回复，使用 /proactive_reply on|off 控制"
      }
    }
  },
  "activity_adaptive": {
    "description": "场景自适应设置",
    "type": "object",
    "items": {
      "enable": {
        "description": "启用场景自适应",
        "type": "bool",
        "default": true,
        "hint": "根据群活跃度自动调整主动回复频率、批量处理参数等配置，实现温和型陪伴风格。使用 /activity_status 查看各群状态。关闭后使用下方「高级参数」中的固定值"
      }
    }
  },
  "image_analysis": {
    "description": "图片分析设置",
    "type": "object",
    "items": {
      "enable": {
        "description": "启用图片分析",
        "type": "bool",
        "default": true,
        "hint": "使用Vision LLM分析对话中的图片内容"
      },
      "mode": {
        "description": "分析模式",
        "type": "string",
        "default": "auto",
        "options": ["auto", "brief", "detailed", "skip"],
        "hint": "auto-智能判断（推荐）, brief-简要, detailed-详细, skip-跳过"
      },
      "daily_budget": {
        "description": "每日分析次数上限",
        "type": "int",
        "default": 100,
        "hint": "每天最多分析的图片数量，0表示无限制。群聊场景启用自适应时会被自动调整"
      },
      "provider_id": {
        "description": "图片分析LLM提供者",
        "type": "string",
        "_special": "select_provider",
        "default": "",
        "hint": "留空使用默认提供者，建议选择支持Vision的模型"
      }
    }
  },
  "error_friendly": {
    "description": "错误消息友好化",
    "type": "object",
    "items": {
      "enable": {
        "description": "启用错误消息友好化",
        "type": "bool",
        "default": true,
        "hint": "将框架发送的技术性错误消息替换为友好的提示语"
      }
    }
  },
  "embedding": {
    "description": "嵌入向量设置",
    "type": "object",
    "items": {
      "enable_local_provider": {
        "description": "启用本地嵌入模型",
        "type": "bool",
        "default": true,
        "hint": "启用后可在 AstrBot 无 embedding 服务时使用本地模型（首次加载约需10-30秒，不会阻塞启动）"
      }
    }
  },
  "persona": {
    "description": "用户画像提取设置",
    "type": "object",
    "items": {
      "extraction_mode": {
        "description": "画像提取模式",
        "type": "string",
        "default": "rule",
        "options": ["rule", "llm", "hybrid"],
        "hint": "rule-纯规则匹配（零成本）, llm-LLM智能提取（消耗token）, hybrid-混合模式（推荐，规则优先+LLM补充）"
      },
      "llm_provider": {
        "description": "画像提取使用的LLM提供者",
        "type": "string",
        "_special": "select_provider",
        "default": "default",
        "hint": "未选择时使用AstrBot默认提供者；选择后将使用指定provider_id进行画像提取"
      },
      "llm_daily_limit": {
        "description": "每日LLM提取次数上限",
        "type": "int",
        "default": 50,
        "hint": "每天最多调用LLM进行画像提取的次数，0表示无限制"
      },
      "fallback_to_rule": {
        "description": "LLM失败时回退到规则",
        "type": "bool",
        "default": true,
        "hint": "LLM提取失败或不可用时自动使用规则匹配"
      }
    }
  },
  "advanced": {
    "description": "高级参数（场景自适应关闭时使用）",
    "type": "object",
    "items": {
      "_note": {
        "description": "说明：以下参数在群聊场景启用「场景自适应」时会被自动覆盖，私聊或关闭自适应时使用此处设定值",
        "type": "string",
        "default": "",
        "hint": "自适应会根据群活跃度（安静/普通/活跃/繁忙）自动调整参数，实现温和型陪伴风格"
      },
      "chat_context_count": {
        "description": "聊天记录注入数量",
        "type": "int",
        "default": 15,
        "hint": "注入最近N条聊天记录到LLM上下文（0为禁用，建议10-25）。群聊自适应范围：10-25条"
      },
      "cooldown_seconds": {
        "description": "主动回复冷却时间",
        "type": "int",
        "default": 60,
        "hint": "两次主动回复之间的最小间隔秒数。群聊自适应范围：30-120秒，安静群更长、繁忙群更短"
      },
      "max_daily_replies": {
        "description": "每日主动回复上限",
        "type": "int",
        "default": 20,
        "hint": "每个群每天最多主动回复次数。群聊自适应范围：8-25次，安静群更少、繁忙群更多"
      },
      "reply_temperature": {
        "description": "主动回复创意度",
        "type": "float",
        "default": 0.7,
        "hint": "LLM生成主动回复的温度参数（0.0-1.0）。群聊自适应范围：0.6-0.8，安静群更保守、繁忙群更活泼"
      },
      "batch_threshold_count": {
        "description": "批量处理消息数阈值",
        "type": "int",
        "default": 20,
        "hint": "累计N条消息后触发批量处理。群聊自适应范围：10-50条，安静群更少、繁忙群更多"
      },
      "batch_threshold_interval": {
        "description": "批量处理时间阈值",
        "type": "int",
        "default": 300,
        "hint": "N秒无新消息后触发批量处理。群聊自适应范围：120-600秒，安静群更长、繁忙群更短"
      },
      "daily_analysis_budget": {
        "description": "群聊每日图片分析上限",
        "type": "int",
        "default": 100,
        "hint": "每个群每天最多分析图片数。群聊自适应范围：30-150次，安静群更少、繁忙群更多"
      }
    }
  }
}
